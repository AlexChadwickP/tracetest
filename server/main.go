/*
 * TraceTest
 *
 * OpenAPI definition for TraceTest endpoint and resources
 *
 * API version: 0.0.1
 * Generated by: OpenAPI Generator (https://openapi-generator.tech)
 */

package main

import (
	"context"
	"flag"
	"log"

	"github.com/kubeshop/tracetest/app"
	"github.com/kubeshop/tracetest/config"
)

var cfg = flag.String("config", "config.yaml", "path to the config file")

func main() {
	flag.Parse()
	cfg, err := config.FromFile(*cfg)
	if err != nil {
		log.Fatal(err)
	}

	ctx := context.Background()
	app, err := app.NewApp(ctx, cfg)
	if err != nil {
		log.Fatal(err)
	}

	err = app.Start(ctx)
	if err != nil {
		log.Fatal(err)
	}
	defer app.Stop(ctx)
}
